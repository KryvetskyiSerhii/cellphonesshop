const element=document.querySelector(".pagination ul"),field=document.querySelector(".phones__blocks"),modalList=document.querySelector(".modal__list"),cartPrice=document.querySelector(".header__price"),cartButton=document.querySelector(".header__cart"),modalWindow=document.querySelector(".modal"),closeButton=document.querySelector(".modal__close");let totalPrice=0,cartArray=[],itemsArray=[{name:"Alcatel GO Flip",price:96,id:"1",img:"img/phones/alcatelgo.jpg"},{name:"Cat S62",price:498,id:"2",img:"img/phones/cats62.jpg"},{name:"One Plus NORD N200 5G",price:216,id:"3",img:"img/phones/OnePlusnordn200.jpg"},{name:"Samsung Galaxy A03s",price:168,id:"4",img:"img/phones/galaxyA03s.jpg"},{name:"Samsung Galaxy A12",price:180,id:"5",img:"img/phones/galaxyA12.jpg"},{name:"Samsung Galaxy A32",price:282,id:"6",img:"img/phones/galaxyA32.jpg"},{name:"Samsung Galaxy A52",price:504,id:"7",img:"img/phones/galaxyA52.jpg"},{name:"Samsung Galaxy S21",price:999,id:"8",img:"img/phones/galaxys21.jpg"},{name:"Samsung Galaxy Z Flip",price:999,id:"9",img:"img/phones/galaxyzflip.jpg"},{name:"Google Pixel 6",price:599,id:"10",img:"img/phones/googlepixel6.jpg"},{name:"iPhone 12 Pro",price:999,id:"11",img:"img/phones/iphone12pro.jpg"},{name:"iPhone 13",price:699,id:"12",img:"img/phones/iphone13.jpg"},{name:"iPhone 13 Pro",price:999,id:"13",img:"img/phones/iphone13pro.jpg"},{name:"iPhone SE",price:449,id:"14",img:"img/phones/iphonese.jpg"},{name:"iPhone XR",price:499,id:"15",img:"img/phones/iphonexr.jpg"},{name:"Motorola Moto G",price:252,id:"16",img:"img/phones/motorolamoto.jpg"},{name:"Nokia X100",price:252,id:"17",img:"img/phones/nokiax100.jpg"},{name:"One Plus 8T",price:749,id:"18",img:"img/phones/oneplus8t.jpg"},{name:"One Plus 9 Pro",price:899,id:"19",img:"img/phones/oneplus9pro.jpg"},{name:"Motorola Razor 5G",price:499,id:"20",img:"img/phones/razor5g.jpg"}];const perPage=8;let active,totalPages=Math.ceil(itemsArray.length/8),items=[];function createPagination(e){for(let i=1;i<=e;i++){let e=document.createElement("li");e.innerHTML=i,element.appendChild(e),items.push(e)}}createPagination(totalPages),createItem(items[0]),createPaginationItem();const cart=document.querySelectorAll(".item-phones__cart");function createPaginationItem(){items.forEach(e=>{e.addEventListener("click",(function(){createItem(this);const i=document.querySelectorAll(".item-phones__cart"),t=8*(parseInt(e.innerHTML)-1),a=t+8,n=itemsArray.slice(t,a);createCartItem(i,n,n)}))})}function itemHTML(e){return`<div class="phones__item item-phones">\n    <div class="item-phones__wrapper">\n        <div class="item-phones__image">\n            <img src="${e.img}" alt="">\n        </div>\n        <div class="item-phones__content">\n            <div class="item-phones__name">${e.name}</div>\n            <div class="item-phones__price">${e.price}$</div>\n        </div>\n        <div class="item-phones__cart" data-id="20">\n            <img src="img/bag.png" alt="bag">\n        </div>\n    </div>\n</div>`}function createItem(e){const i=8*(parseInt(e.innerHTML)-1),t=i+8,a=itemsArray.slice(i,t);active&&active.classList.remove("active"),active=e,e.classList.add("active"),field.innerHTML="",a.forEach(e=>{field.innerHTML+=itemHTML(e)})}function createCartItem(e,i,t){for(let a=0;a<e.length;a++)e[a].addEventListener("click",()=>{addToCart(i[a]);const e=document.createElement("li");e.classList.add("modal__list-item"),e.setAttribute("id",t[a].id),e.innerHTML=`<div class="modal__block">\n        <div class="modal__image">\n            <img src="${i[a].img}" alt="">\n        </div>\n        <div class="modal__name">${i[a].name}</div>\n        <div class="modal__price">$${i[a].price}</div>\n        <div class="modal__trash" onclick="removeItem(${i[a].id})">\n            <img src="img/trash.png" alt="">\n        </div>\n        </div>`,modalList.appendChild(e)})}function addToCart(e){totalPrice+=e.price,cartPrice.innerHTML="$"+totalPrice}function removeItem(e){const i=document.getElementById(e);modalList.removeChild(i);let t=itemsArray.filter(i=>i.id==e);totalPrice-=t[0].price,cartPrice.innerHTML="$"+totalPrice}createCartItem(cart,itemsArray,itemsArray),cartButton.addEventListener("click",()=>{modalWindow.classList.add("modal-active")}),closeButton.addEventListener("click",()=>{modalWindow.classList.remove("modal-active")});const searchField=document.querySelector(".search__input");let searchResult="";function showSearchResult(){field.innerHTML="";let e=itemsArray.filter(e=>e.name.toLowerCase().includes(searchResult.toLowerCase())),i=Math.ceil(e.length/8);element.innerHTML="",createPagination(i),e.forEach(e=>{field.innerHTML+=itemHTML(e)});createCartItem(document.querySelectorAll(".item-phones__cart"),e,e)}searchField.addEventListener("input",e=>{if(searchResult=e.target.value,""==searchResult){element.innerHTML="",createPagination(totalPages),createPaginationItem(),field.innerHTML="",createItem(items[0]);createCartItem(document.querySelectorAll(".item-phones__cart"),itemsArray,itemsArray)}else showSearchResult()});